# 会议信息，示例数据如下
# ```JSON
# {
#   "id": "2s4wtBQesFdczpwZzSo1QZ",
#   "subject": "test abc333",
#   "ownerId": "D5oU5GsWiE1mTYv2YWYKgn",
#   "ownerName": "niuyan",
#   "ownerMobile": "18220488316",
#   "ownerPhone": "18220488316",
#   "checkInAt": "2021-11-19 15:30:00",
#   "clientType": "WEBAPP",
#   "meetingInfra": "",
#   "totalServerPrice": 0,
#   "ownerUpStreamId": "1391658928041947137",
#   "ownerUpstreamId": "1391658928041947137",
#   "ownerDeptName": "无部门",
#   "ownerJobNumber": "",
#   "ownerUserNamePinYin": "niuyan",
#   "ownerUserEmail": "",
#   "bookingUserId": "D5oU5GsWiE1mTYv2YWYKgn",
#   "bookingUsernamePinYin": "niuyan",
#   "bookingUserEmail": "",
#   "bookingUserUpStreamId": "1391658928041947137",
#   "bookingUserName": "niuyan",
#   "bookingUserShowName": "niuyan",
#   "beginTime": "2021-11-19 15:30:00",
#   "endTime": "2021-11-19 16:45:00",
#   "longTimeUse": false,
#   "duration": 75,
#   "content": "",
#   "roomId": "Xr9T6sh4wrN9Me2GL6j9YW",
#   "roomName": "第三会议室",
#   "officeAreaId": "9KgMd2zPrFxzxaid1TSsQA",
#   "officeAreaName": "默认楼层",
#   "allOfficeAreaName": "默认楼层",
#   "copyToMembers": [],
#   "roomNeedApproved": true,
#   "templateType": "",
#   "receptionId": "",
#   "receptionName": "",
#   "receptionMobile": "",
#   "memberNumbers": 1,
#   "customFormIds": [],
#   "roomType": "ROOM",
#   "status": "OPEN",
#   "workflow": "APPROVE",
#   "statusLabel": "正常",
#   "notPublic": false,
#   "needCheckin": true,
#   "joinStatus": "Y",
#   "checkinStatus": "N",
#   "currentUserCheckinStatus": "N",
#   "checkedStatus": "Y",
#   "meetingRepeatType": "NONE",
#   "members": [
#     {
#       "id": "D5oU5GsWiE1mTYv2YWYKgn",
#       "name": "niuyan",
#       "namePinyin": "niuyan",
#       "jobNumber": "",
#       "nickName": "niuyan",
#       "email": "",
#       "loginName": "niuyan",
#       "mobile": "18220488316",
#       "corpId": "5HqXn3Bpgits6WVbRjXpVY",
#       "corpName": "双杰测试",
#       "deptId": "0",
#       "deptName": "无部门",
#       "headImgUrl": "https://a.cdn6.cn/assets/default-head.jpg",
#       "balanceAmount": 0,
#       "corpPlatform": "WXMP",
#       "status": "ACTIVE",
#       "upstreamId": "1391658928041947137",
#       "labelName": "niuyan",
#       "labelDeptName": "无部门",
#       "joinStatus": "Y",
#       "joinAt": "2021-11-15 11:19:52",
#       "checkinStatus": "N",
#       "checkAt": ""
#     }
#   ],
#   "visitors": [],
#   "commentCount": 1,
#   "meetingType": "STANDARD",
#   "feeAmount": ".00",
#   "memberCount": 1,
#   "busyCssName": "busy-y busy-for-me",
#   "meetingOrderLists": [],
#   "checkedInPeopleCount": 0,
#   "confirmedPeopleCount": 1,
#   "refusedPeopleCount": 0,
#   "bookingTimePointMinutes": 15,
#   "createdAt": "2021-11-15 11:19:52",
#   "updatedAt": "2021-11-19 16:45:00",
#   "meetingFiles": [],
#   "remaindMinutes": [
#     "15"
#   ],
#   "beforeNotify": false,
#   "facilityNames": [],
#   "approveFlow": {
#     "ownerOperate": {
#       "user": {
#         "id": "D5oU5GsWiE1mTYv2YWYKgn",
#         "loginName": "niuyan",
#         "name": "niuyan",
#         "namePinyin": "niuyan",
#         "jobNumber": "",
#         "nickName": "niuyan",
#         "headImgUrl": "https://a.cdn6.cn/assets/default-head.jpg",
#         "email": "",
#         "mobile": "18220488316",
#         "deptId": "0",
#         "deptName": "无部门",
#         "corp": {
#           "id": "5HqXn3Bpgits6WVbRjXpVY",
#           "name": "双杰测试",
#           "abilities": []
#         },
#         "corpName": "双杰测试",
#         "balanceAmount": "0.00",
#         "roles": [],
#         "status": "ACTIVE",
#         "statusLabel": "已激活",
#         "isAnonymous": false,
#         "disableBooking": false,
#         "upstreamId": "1391658928041947137",
#         "createdAt": "2021-10-11 11:36:04",
#         "updatedAt": "2021-10-11 12:31:27",
#         "abilities": []
#       },
#       "createTime": "Nov 15, 2021 11:19:52 AM"
#     },
#     "approverOperates": [
#       {
#         "user": {
#           "id": "Bb8jwbzuACsuJFbuq45rBR",
#           "loginName": "admin",
#           "name": "管理员",
#           "namePinyin": "Guan Liyuan",
#           "nickName": "Guan Liyuan",
#           "headImgUrl": "https://a.cdn6.cn/assets/default-head.jpg",
#           "email": "admin@sojo.rt.v-vip.cn",
#           "deptId": "22fPTR6D2YFUujyz5NJuRk",
#           "deptName": "ssswww",
#           "corp": {
#             "id": "5HqXn3Bpgits6WVbRjXpVY",
#             "name": "双杰测试",
#             "abilities": []
#           },
#           "corpName": "双杰测试",
#           "balanceAmount": "0.00",
#           "roles": [
#             "ADMIN"
#           ],
#           "status": "ACTIVE",
#           "statusLabel": "已激活",
#           "depts": [
#             {
#               "id": "22fPTR6D2YFUujyz5NJuRk",
#               "name": "ssswww",
#               "shortName": "ssswww",
#               "fullName": "ssswww",
#               "showOrder": 0,
#               "labelName": "ssswww",
#               "userCount": 1,
#               "userCountWithNew": 1,
#               "upstreamId": "1427200767326752770",
#               "isSett": true
#             }
#           ],
#           "isAnonymous": false,
#           "disableBooking": false,
#           "createdAt": "2021-10-08 18:16:16",
#           "updatedAt": "2022-04-27 09:53:25",
#           "abilities": []
#         },
#         "updateTime": "Nov 19, 2021 2:33:04 PM",
#         "remark": "流程级别:[1]的用户:管理员执行通过操作,操作人:管理员,审批备注:同意"
#       }
#     ]
#   },
#   "nowAvailableDelayMinutes": 480,
#   "form": [
#     "subject",
#     "meetingPlace",
#     "meetingDate",
#     "meetingTime",
#     "inviter",
#     "inviterMobile",
#     "memberNumbers",
#     "joinMember"
#   ],
#   "showExtras": false,
#   "showExtrasSwitch": false,
#   "abilities": [
#     "comment",
#     "finish",
#     "finished",
#     "share",
#     "view",
#     "waitOpen"
#   ]
# }
# ```
class ThMeetingBooking::Records::Booking::Meeting < ThMeetingBooking::Records::Base
  Fields = [
    :id, # 主键
    :subject, # 会议主题
    :owner_id, # 预订人ID
    :owner_name, # 预订人姓名
    :owner_mobile, # 预订人手机
    :owner_phone, # 预订人手机
    :check_in_at,
    :client_type,
    :meeting_infra,
    :total_server_price,
    :owner_up_stream_id, # 预订人在业务系统的ID
    :owner_upstream_id, # 预订人在业务系统ID
    :owner_dept_name, # 预订人部门名
    :owner_job_number, # 预订人工号
    :owner_user_name_pin_yin,
    :owner_user_email, # 预订人邮箱
    :booking_user_id, # 实际操作人ID
    :booking_username_pin_yin,
    :booking_user_email, # 实际操作人邮箱
    :booking_user_up_stream_id, # 实际操作人业务系统ID
    :booking_user_name, # 实际操作人姓名
    :booking_user_show_name, # 预订操作人显示名
    :begin_time, # 会议开始时间
    :end_time, # 会议结束时间
    :long_time_use,
    :duration, # 持续时间（分钟数）
    :content, # 会议内容
    :room_id, # 会议室ID
    :room_name, # 会议室名
    :office_area_id, # 区域ID
    :office_area_name, # 区域名
    :all_office_area_name,
    :copy_to_members,
    :room_need_approved,
    :template_type,
    :receptionId,
    :receptionName,
    :receptionMobile,
    :memberNumbers, # 参与人数
    :custom_form_ids,
    :room_type,
    :status, # 会议状态：OPEN 正常 APPROVE需要审批
    :workflow,
    :status_label, # 状态（显示用）
    :not_public, # 是否公开
    :need_checkin, # 是否需要签到
    :join_status,
    :checkin_status,
    :current_user_checkin_status,
    :checked_status,
    :meeting_repeat_type,
    :members, # 参与者清单
    :visitors,
    :comment_count,
    :meeting_type,
    :fee_amount,
    :member_count,
    :busy_css_name,
    :meeting_order_lists,
    :checked_in_people_count,
    :confirmed_people_count,
    :refused_people_count,
    :booking_time_point_minutes,
    :created_at,
    :updated_at,
    :meeting_files,
    :remaind_minutes,
    :before_notify,
    :facility_names,
    :approve_flow,
    :now_available_delay_minutes,
    :form,
    :show_extras,
    :show_extras_switch,
    :abilities,
  ]

  attr_accessor(*Fields)

  def members=(value)
    if value.is_a?(Array)
      @members = value.map { |item| ThMeetingBooking::Records::Booking::Member.new(item) }
    else
      @members = nil
    end
  end
end
